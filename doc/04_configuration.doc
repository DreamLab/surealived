[PL]
\section{Konfiguracja}
\subsection{G³owny plik konfiguracyjny}
Domy¶lnie g³ówny plik konfiguracyjny \textit{surealived.cfg}
rezyduje w~\textit{/etc/surealived}. Zawiera on podstawow±
konfiguracjê zarówno dla \textbf{surealived} jak i \textbf{ipvssync}.
Konfiguracja ta mo¿e byæ w~ oddzielnych zbiorach, zw³aszcza, ¿e 
synchronizator korzysta tylko z kilku zmiennych z~tego zbioru. 
Jednak¿e, je¶li chcemy siê uchroniæ przed dziwnymi b³êdami zwi±zanymi
z~tym, ¿e oba programy bêd± mia³y ró¿ne warto¶ci tych wspólnych
zmiennych lepiej jest je zostawiæ w tym zbiorze.

\subsubsection{Zmienne konfiguracyjne surealived}
Oto lista zmiennych wykorzystywanych przez tester:
\begin{itemize}
 \item \textbf{maxfd} -- maksymalna ilo¶æ (domy¶lnie 1024) otwartych 
	deskryptorów procesu%
\footnote{Je¶li uruchamiasz aplikacjê z \textit{roota} sprawa jest prosta,
w przeciwnym wypadku upewnij siê, ¿e u¿ytkownik mo¿e przestawiæ t± warto¶æ.}.
 \item \textbf{log} -- ¶cie¿ka do logu lub \textit{stderr}. Warto¶æ ta jest
	nadpisywana na \textit{stderr} je¶li program nie bêdzie uruchamiany
	w trybie demona.
 \item \textbf{logging} -- poziom szczegó³owo¶ci logowania w kolejno¶ci rosn±cej: 
	\textit{error}, \textit{warn}, \textit{info}, \textit{debug}, \textit{debdt}.
	Warto¶æ ta jest nadpisywana przez parametr \textit{-v}.
 \item \textbf{modules\_path} -- ¶cie¿ka do binarnych modu³ów (testera).
 \item \textbf{modules} -- lista modu³ów do za³adowania oddzielona przecinkami
	(\textbf{UWAGA} -- nie mo¿e byæ spacji po przecinku) lub \textit{all},
	co spowoduje za³adowanie wszystkich modu³ów ze ¶cie¿ki \textbf{modules\_path}.
	
 \item \textbf{epoll\_size} -- minimalny rozmiar epolla, je¶li ilo¶æ testowanych
 	us³ug jest wiêksza od tej warto¶ci zostanie ona nadpisana.
 \item \textbf{loop\_interval\_ms} -- okre¶la co ile milisekund tester
   powinien sprawdzaæ czy czas testów \textit{virtuala} dobieg³ koñca
   lub te¿ nale¿y go wystartowaæ (domy¶lnie: \textit{100})
 \item \textbf{epoll\_interval\_ms} -- maksymalny czas (w milisekundach)
   jaki epoll ma czekaæ na zdarzenie (domy¶lnie: \textit{10})
 \item \textbf{startup\_delay\_ms} -- tzw. rozbiegówka -- okre¶la okres w którym
   testy maj± byæ rozpoczête (czasy startu testów bêda roz³o¿one w tym okresie)
   (domy¶lnie: \textit{1000})
 
 \item \textbf{debug\_comm} -- flaga 0/1 okre¶laj±ca mo¿liwo¶æ zrzucania przebiegu 
	komunikacji z realami w danym wirtualu. Prze³±czenie jej na 1 jest warunkiem
	koniecznym (niewystarczaj±cym) do zapisu komunikacji przez tester%
\footnote{Nale¿y jeszcze w konfiguracji xmlowej w tagu <tester> ustawiæ atrybut 
	\textit{debugcomm=''1''}.}.
 \item \textbf{debug\_comm\_path} -- ¶cie¿ka, gdzie zapisywane bêd± zrzuty z komunikacji.

 \item \textbf{memlimit} -- limit pamiêci w MB, w przypadku przekroczenia
   limitu \textit{watchdog} zresetuje \textbf{surealived}, warto¶æ ta jest ignorowana
   gdy program nie jest uruchomiony jako demon.

 \item \textbf{stats\_dir} -- ¶cie¿ka, gdzie zapisywane bêd± statystyki testów%
\footnote{Mo¿na je wykorzystaæ do analizy czasów odpowiedzi poszczególnych serwerów, 
	zbalansowania wirtuali, itp.}.
 \item \textbf{log\_stats} -- ustawienie warto¶ci na \textit{true} spowoduje, ¿e do
  	\textbf{stats\_dir} bêd± zapisywane statystyki testów w sposób indywidualny,
 	tj \textit{<zbiór>.<timestamp>} per test wirtuala%
\footnote{Je¶li w³±czysz t± opcjê zadbaj o czyszczenie katalogu ze starych zbiorów, 
	gdy¿ bardzo szybko bêdziesz tam mia³ miliony zbiorów.}.
 \item \textbf{log\_stats\_combined} -- warto¶æ \textit{true} oznacza, ¿e do jednego zbioru
 	bêd± dopisywane wszystkie statystyki testów%
\footnote{Zbiór mo¿na przycinaæ, gdy¿ aplikacja dopisuje na koniec (tworz±c wcze¶niej zbiór
	je¶li nie istnieje).}.

 \item \textbf{no\_sync} -- je¶li \textit{true} nie bêd± tworzone pliki dla 
	synchronizatora.

 \item \textbf{use\_offline\_dump} -- czy zapisywaæ stan reali, których
        nie uda³o siê poprawnie przetestowaæ (plik stanów negatywnych).
 \item \textbf{offline\_dump} -- ¶cie¿ka do pliku offline.dump -- warto¶æ ta
   jest ignorowana gdy \textbf{use\_offline\_dump} jest ustawione na \textit{false}
 \item \textbf{override\_dump} -- ¶cie¿ka do pliku override.dump

\end{itemize}

[EN]
\section{Configuration}
\subsection{Main configuration file}
By default main configuration file \textit{surealived.cfg}
is placed in~\textit{/etc/surealived}. That file holds basic
configuration for \textbf{surealived} and \textbf{ipvssync}.
Configuration can be held in separate collections in particular
because synchronizer uses only few variables defined inside that set.
However in order to protect us from strange errors related to
config desynchronization it's better to keep it in that one file.

\subsubsection{surealived config variables}
Here's a list of variables used by tester:
\begin{itemize}
 \item \textbf{maxfd} -- maximum number of open descriptors (1024 by default)%
   \footnote{If you run this application with \textit{root} privileges it's
     very simple, otherwise please make sure user can change that value.}.
 \item \textbf{log} -- path to log or \textit{stderr}. That value is overwritten
   to \textit{stderr} if program is not run daemonized (\textit{--d} parameter).
 \item \textbf{logging} -- logging verbosity in ascending order:
   \textit{error}, \textit{warn}, \textit{info}, \textit{debug}, \textit{debdt}.
   This value is overwritten by \textit{-v} parameter.
 \item \textbf{modules\_path} -- path to tester's binary modules.
 \item \textbf{modules} -- comma-separated list of modules
   (\textbf{WARNING} -- there must be no space after comma) or \textit{all},
   which forces loading of all modules from path set in \textbf{modules\_path}.	

 \item \textbf{epoll\_size} -- minimum epoll size, if there is more services to test
   than this value describes, it will be overwritten
 \item \textbf{loop\_interval\_ms} -- defines, how often (in ms) \textbf{surealived} should check
   if \textit{virtual} time has ended or if \textit{virtual} tests should be initiated
   (default: \textit{100})
 \item \textbf{epoll\_interval\_ms} -- maximum time (in milliseconds) epoll should wait for event
   (default: \textit{10})
 \item \textbf{startup\_delay\_ms} -- defines maximum tests start delay, 
   start times of \textit{reals} tests are spread in that period (default: \textit{1000})
 
 \item \textbf{debug\_comm} -- binary flag (0/1) determining if dumping
   communication with reals inside given virtual should be enabled.
   Setting this value to 1 is insufficient prerequisite to dump communication%
   \footnote{You also need to set \textit{debugcomm=''1''} attribute inside
     <tester> tag in xml configuration.}.
 \item \textbf{debug\_comm\_path} -- path to directory where communication dump files
   should be saved.

 \item \textbf{memlimit} -- \textbf{surealived''s} memory limit, if exceeded \textit{watchdog}
   will restart application, this value is ignored if \textbf{surealived} isn't run as daemon.

 \item \textbf{stats\_dir} -- directory path, describing where test stats should be saved%
¶cie¿ka, gdzie zapisywane bêd± statystyki testów%
\footnote{it can be used to analyze each server answer time, virtual balancing, etc.}

 \item \textbf{log\_stats} -- setting this value to \textit{true} will enable
   saving test statistics inside \textbf{stats\_dir}, each virtual will have it's own file
   named \textit{<set>.<timestamp>}%
   \footnote{If you enable this option, make sure that old logs will be deleted,
     because soon you will have millions of files!}.

 \item \textbf{log\_stats\_combined} -- setting this value to \textit{true} enables
   saving all statistics to one file%
   \footnote{That file can be truncated, because application appends data to the end of file
     (creating file if it doesn't exist)}.

 \item \textbf{no\_sync} -- setting this to \textit{true} disables synchronization with \textbf{IPVS}

 \item \textbf{use\_offline\_dump} -- defines whether offline.dump file should be used, that file
   holds information about \textit{reals} that are currently offline (negative states file). This file
   is very helpful when restarting application!
 \item \textbf{offline\_dump} -- path to offline.dump file
   (default: \textit{/var/lib/surealived/offline.dump}, this value is ignored if
   \textbf{use\_offline\_dump} is set to false)
 \item \textbf{override\_dump} -- path to override.dump file
   (default: \textit{/var/lib/surealived/override.dump})
\end{itemize}

[PL]
\subsubsection{Zmienne konfiguracyjne ipvssync}
Oto lista zmiennych wykorzystywanych przez synchronizator:
\begin{itemize}
 \item \textbf{ipvssync\_log} -- ¶cie¿ka do pliku logu synchronizatora lub \textit{stderr}.
   Warto¶æ ta jest nadpisywana na \textit{stderr} je¶li program nie bêdzie uruchamiany w
   trybie demona.
 \item \textbf{ipvssync\_logging} -- poziom szczegó³owo¶ci logowania w kolejno¶ci rosn±cej: 
	\textit{error}, \textit{warn}, \textit{info}, \textit{debug}, \textit{debdt}.
	Warto¶æ ta jest nadpisywana przez parametr \textit{-v}.

\end{itemize}

[EN]
\subsubsection{ipvssync config variables}
Here's a list of variables used by synchronizer:
\begin{itemize}
 \item \textbf{ipvssync\_log} -- path to synchronizer's log file or \textit{stderr}
   (default: \textit{/var/log/surealived/ipvssync.log}), this value is overwritten
   to \textit{stderr} if program is not run daemonized (\textit{--d} parameter).
 \item \textbf{ipvssync\_logging} -- logging verbosity in ascending order:
   \textit{error}, \textit{warn}, \textit{info}, \textit{debug}, \textit{debdt}.
   This value is overwritten by \textit{-v} parameter.
\end{itemize}

[PL]
\subsubsection{Wspólne zmienne konfiguracyjne}
Oto lista zmiennych wykorzystywanych zarówno przez tester jak i synchronizator:
\begin{itemize}
 \item \textbf{lock\_sync\_file} -- plik s³u¿±cy do synchronizacji
	pomiêdzy testerem a synchronizatorem (flock).
 \item \textbf{full\_sync\_file} -- plik pe³nej konfiguracji tablicy
 	\textit{IPVS} dla synchronizatora (generowany co 60 sek. przez tester).
 \item \textbf{full\_reload\_file} -- plik (flaga), którego pojawienie siê
	wymusza prze³adowanie konfiguracji synchronizatora. 
 \item \textbf{diff\_sync\_dir} -- katalog, gdzie zapisywane bêd± pliki 
	ró¿nicowe (zawieraj±ce zmiany w stosunku do pe³nego pliku konfiguracji).
\end{itemize}

[EN]
\subsubsection{Common variables}
Here is a list of variables used by both - tester and synchronizer:
\begin{itemize}
 \item \textbf{lock\_sync\_file} -- file used to synchronize between
   \textbf{ipvssync} and \textbf{surealived} (flock).
 \item \textbf{full\_sync\_file} -- full synchronization file, containing 
   complete \textit{IPVS} table information (generated every 60 seconds by tester)
 \item \textbf{full\_reload\_file} -- file (flag), forcing full resynchronization.
 \item \textbf{diff\_sync\_dir} -- directory in which differential synchronization files
   should be stored (files containing changes made after full synchronization).
\end{itemize}

